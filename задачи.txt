-- –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ (—Å–Ω–∞—á–∞–ª–∞ –¥–æ—á–µ—Ä–Ω–∏–µ)
DROP TABLE IF EXISTS analytics_events CASCADE;
DROP TABLE IF EXISTS comments CASCADE;
DROP TABLE IF EXISTS email_queue CASCADE;
DROP TABLE IF EXISTS email_notifications CASCADE;
DROP TABLE IF EXISTS test_results CASCADE;
DROP TABLE IF EXISTS booking_sessions CASCADE;
DROP TABLE IF EXISTS user_subscriptions CASCADE;
DROP TABLE IF EXISTS packages CASCADE;
DROP TABLE IF EXISTS service_packages CASCADE;
DROP TABLE IF EXISTS therapists CASCADE;
DROP TABLE IF EXISTS psychological_tests CASCADE;
DROP TABLE IF EXISTS users CASCADE;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã —É–¥–∞–ª–µ–Ω—ã
SELECT tablename FROM pg_tables WHERE schemaname = 'public';



–®–∞–≥ 2: –û—Ç–∫–ª—é—á–∏—Ç—å RLS –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü (–µ—Å–ª–∏ –æ–Ω–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç)
-- –û—Ç–∫–ª—é—á–∏—Ç—å RLS –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
ALTER TABLE IF EXISTS users DISABLE ROW LEVEL SECURITY;
ALTER TABLE IF EXISTS psychological_tests DISABLE ROW LEVEL SECURITY;
ALTER TABLE IF EXISTS test_results DISABLE ROW LEVEL SECURITY;
ALTER TABLE IF EXISTS therapists DISABLE ROW LEVEL SECURITY;
ALTER TABLE IF EXISTS booking_sessions DISABLE ROW LEVEL SECURITY;
ALTER TABLE IF EXISTS service_packages DISABLE ROW LEVEL SECURITY;
ALTER TABLE IF EXISTS user_subscriptions DISABLE ROW LEVEL SECURITY;
ALTER TABLE IF EXISTS email_notifications DISABLE ROW LEVEL SECURITY;
ALTER TABLE IF EXISTS analytics_events DISABLE ROW LEVEL SECURITY;
ALTER TABLE IF EXISTS comments DISABLE ROW LEVEL SECURITY;
ALTER TABLE IF EXISTS packages DISABLE ROW LEVEL SECURITY;
ALTER TABLE IF EXISTS email_queue DISABLE ROW LEVEL SECURITY;


üîß –ö–ê–ö –ù–ê–ó–ù–ê–ß–ò–¢–¨ –†–û–õ–ò –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø–ú:
–ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:
// app/api/admin/update-role/route.ts
// –ü–æ–∑–≤–æ–ª—è–µ—Ç –º–µ–Ω—è—Ç—å —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

typescript


–ß–µ—Ä–µ–∑ SQL (–≤—Ä–µ–º–µ–Ω–Ω–æ):
-- –°–¥–µ–ª–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–µ—Ä–∞–ø–µ–≤—Ç–æ–º
UPDATE users SET role = 'therapist' WHERE email = 'therapist@example.com';

-- –°–¥–µ–ª–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–¥–º–∏–Ω–æ–º  
UPDATE users SET role = 'admin' WHERE email = 'admin@example.com';